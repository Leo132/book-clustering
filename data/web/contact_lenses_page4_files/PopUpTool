(function(n){n(jQuery,typeof AgentResources=="undefined"||typeof AgentResources.text=="undefined"?{MessageWindow:"訊息視窗",Sure:"確定",SubmitFailed:"送出失敗",IKnow:"我知道了",SaveLoading:"保存中，請稍候...",SaveSuccess:"已保存成功！",SaveError:"保存失敗",Loading:"載入中...",LoadingSuccess:"載入完成",LoadingError:"載入失敗",Uploading:"上傳中...",UploadingSuccess:"上傳完成",UploadingError:"上傳失敗",Close:"關閉"}:AgentResources.text)})(function(n,t){PopUp=function(i){var r=function(){var s={size:"S",title:t.MessageWindow,button:[{text:t.Sure,type:"confirm",callback:null}],close:null},r;this.option=n.extend(s,i);r="alert";switch(this.option.size.toUpperCase()){case"L":r=""}var f=n('<div class="temcs_popup_wrap"/>'),u=n('<div class="temcs_popup '+r+'"/>'),e=n('<a href="javascript:void(0);" class="close"/>'),h=n('<dfn class="temcs_icon_close_gray" title="'+t.Close+'"/>'),o=n('<div class="header"/>'),c=n("<h2/>").html(this.option.title),l=n('<div class="content"/>'),a=n('<div class="btns_down"/>');this.option.width&&u.width(this.option.width);e.append(h);o.append(c);u.append(e).append(o).append(l).append(a);f.append(u);this.pop=f};return r.prototype={Text:function(t){var i=n("<p/>").text(t);n(".content",this.pop).empty().append(i);this.Open(open)},Html:function(t,i){n(".content",this.pop).empty().append(t);this.Open(i)},Open:function(t){t=t||!0;t&&(n("body").append(this.pop),this.SetButton())},SetButton:function(){var t=this,i=n('<input class="temcs_btn_main" type="button"/>');n(".btns_down",t.pop).empty();t.pop.off("click","input.temcs_btn_main");t.pop.off("click","a.close").on("click","a.close",function(){t.Close(t.option.close)});n.each(t.option.button,function(r,u){var e=NewID(),f=u.type!=null&&u.type.toLowerCase()=="cancel"?i.clone().addClass("sec"):i.clone();f.attr("id",e);f.val(u.text);n(".btns_down",t.pop).append(f);t.pop.on("click","input.temcs_btn_main#"+e,function(){t.Close(u.callback)})})},Close:function(n){if(n!=null){var t=n(this.pop);if(t===!1)return}this.pop.remove()},Fail:function(){this.Text(t.SubmitFailed)}},new r};var i=[],f=0,r={start:0,over:1},u=function(){var t=function(t){i.indexOf(t)!==0||t.exec||(n("body").append(t.target),t.exec=!0)},u=function(n){var t=i.indexOf(n);t>=0&&(i.indexOf(n)===0&&(n.target.remove(),n.exec=!1),i.splice(t,1))};return function(n,f){n===r.start?(i.push(f),t(f)):(u(f),i.length&&t(i[0]))}}();Loading=function(n){switch(n){case LoadingType.load:this.text={start:t.Loading,success:t.LoadingSuccess,error:t.LoadingError};break;case LoadingType.upload:this.text={start:t.Uploading,success:t.UploadingSuccess,error:t.UploadingError};break;case LoadingType.save:default:this.text={start:t.SaveLoading,success:t.SaveSuccess,error:t.SaveError}}this.index=f++;this.exec=!1};Loading.prototype={start:function(t){var i=n('<div class="popup_wrap opacity vcenter"/>'),f=n('<div class="te_saving"/>'),e=n('<div class="te_loader"/>'),o=n("<h3/>").text(t||this.text.start);f.append(e).append(o);i.append(f);this.target=i.clone();u(r.start,this)},success:function(t){var i=n('<div class="popup_wrap opacity vcenter"/>'),f=n('<div class="te_saving te_success"/>'),e=n('<dfn class="te_icon_tick_w"/>'),o=n("<h4/>").text(t||this.text.success);f.append(e).append(o);i.append(f);this.target=i.clone();u(r.start,this)},error:function(t){var i=n('<div class="popup_wrap opacity vcenter"/>'),f=n('<div class="te_saving te_error"/>'),e=n('<dfn class="te_icon_close_w"/>'),o=n("<h4/>").text(t||this.text.error);f.append(e).append(o);i.append(f);this.target=i.clone();u(r.start,this)},remove:function(){u(r.over,this)}};LoadingType={save:"save",load:"load",upload:"upload"}})